{let e=function(){let e=$("#new-post-form");e.submit((function(s){s.preventDefault(),$.ajax({type:"post",url:"/posts/addPost",data:e.serialize(),success:function(e){let s=t(e.data.post);$("#posts-list-container>div").prepend(s),n($(".delete-post-button",s)),new PostComments(e.data.post._id),new ToggleLike($(" .toggle-like-button",s)),new Noty({theme:"relax",text:`${e.message}`,type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){new Noty({theme:"relax",text:"error in creating post",type:"success",layout:"topRight",timeout:1500}).show(),console.log(e.responseText)}})}))},t=function(e){return $(`\n        <div class="card m-4" id="post-${e._id}" style="list-style-type: none;">\n\n    <div class="card-header">\n        <div class="d-flex flex-row justify-content-between">\n            <div class="d-flex flex-row profile-info">\n                <h3 class="profile-pic-holder" style="width: 55px; height: 55px; margin: 0px 5px;">\n                    \n                ${e.user.avatar?`<img src="${e.user.avatar}" alt="image" style = "width: 100%;height: 100%; border-radius: 50px;"alt="image">`:'<img src="/images/avatar1.png" alt="image" style = "width: 100%;height: 100%; border-radius: 50px;">'}         \n\n                </h3>\n                <h4 class="text-capitalize profile-name-holder">\n                    ${e.user.name}\n                </h4>\n\n            </div>\n\n            \n                <div class="dropdown">\n                    <a class="dropdown-toggle" role="button" id="dropdownMenuLink-${e.id}"\n                        data-bs-toggle="dropdown" aria-expanded="false">\n                        <i class="fas fa-ellipsis-v"></i>\n                    </a>\n\n                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink-${e.id}">\n                        <li><a class="delete-post-button dropdown-item" href="/posts/destroy/${e.id}">Delete</a>\n                        </li>\n                    </ul>\n                </div>\n        </div>\n    </div>\n\n    <div class="card-body">\n        <p>\n            <small>\n                ${e.content}\n            </small>\n            <br>\n        </p>\n    </div>\n\n\n    <div class="card-footer text-muted d-flex flex-row">\n\n            <div class="mx-2">\n                \n                    <a class="toggle-like-button" data-likes="${e.likes.length}" href="/likes/toggle/?id=${e._id}&type=Post">\n                        ${e.likes.length} <i class="fas fa-thumbs-up"></i>\n                    </a>\n\n            </div>\n\n        <div class="mx-2">\n            <button class="btn btn-link btn-block" type="button" data-bs-toggle="collapse"\n                data-bs-target="#post-${e._id}-collapse" aria-expanded="false">\n                <h4>\n                    <i class="fas fa-comment"></i>\n                    Comments\n                </h4>\n            </button>\n        </div>\n    </div>\n\n        <div id="post-${e._id}-collapse" class="collapse card-footer">\n            <div class="card-body">\n                <div>\n                    \n                        <form action="/comments/create" method="POST" id="post-${e._id}-comments-form">\n                            <input type="text" name="content" placeholder="Add your comment" required>\n                            <input type="hidden" name="post" value="${e._id}">\n                            <input type="submit" value="Add">\n                        </form>\n                    \n                </div>\n\n                <div class="post-comment-list">\n                    <ul id="post-comments-${e._id}" style="list-style-type: none; padding: 0px;>\n\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>`)},n=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$(`#post-${e.data.post_id}`).remove(),new Noty({theme:"relax",text:`${e.message}`,type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))},s=function(){$("#posts-list-container>div>div").each((function(){let e=$(this),t=$(".delete-post-button",e);n(t);let s=e.prop("id").split("-")[1];new PostComments(s)}))};e(),s()}